<h1>Question</h1>

<p>
  <%= @question.title %>
</p>

<p>
  <%= @question.content %>
</p>

<p>
  <strong>Votes:</strong>
  <span class="question_votes"><%= @question.votes %></span><br>
  <%= button_to '+1', upvote_question_path(@question), method: :post, class: "vote_questions" %><br>
  <%= button_to '-1', downvote_question_path(@question), method: :post, class: "vote_questions" %>
</p>

<%= form_for @answer, url: question_answers_path(@question) do |f| %>
  <p>
    <%= f.label 'Answer the Question:' %><br>
    <%= f.text_area :content %>
  </p>

  <p>
    <%= f.submit "Add Answer", class: "add_answer" %>
  </p>
<% end %>

<table class="answer_container">
  <% @answers.order(votes: :desc).each do |answer| %>
    <%= render partial: 'answer', locals: {answer: answer} %>
  <% end %>
</table>

<br><%= link_to 'Edit Question', edit_question_path %>

<p>
  <%= link_to 'Delete Question', question_path(@question),
      method: :delete,
      data: { confirm: 'Are you sure?' } %>
</p>

<%= link_to 'Back', questions_path %>

<script id="answer_template" type="text/x-handlebars-template">
  <tr>
    <td colspan="5">{{content}}</td>
  </tr>
  <td>
    <a href="/questions/{{question_id}}/answers/{{answer_id}}/edit">Edit</a>
  </td>
  <td>
    <a href="/questions/{{question_id}}/answers/{{answer_id}}" data-method="delete">Delete</a>
  </td>
  <td class="votes">Votes: 0</td>
  <td>
    <form class="button_to" method="post" action="/questions/{{question_id}}/answers/{{answer_id}}/upvote"><input class="vote_answers" type="submit" value="+1"><input type="hidden" name="authenticity_token" value="iovtSYWW4p1BIN3jgSikauFUYqqCZE9xjVXf6hzm8sc8jlPLzWBm2BIPFXTK7zy0Mkj+l6HcFpRjZ9mIs01C3w==">
    </form>
  </td>
  <td>
    <form class="button_to" method="post" action="/questions/{{question_id}}/answers/{{answer_id}}/downvote"><input class="vote_answers" type="submit" value="-1"><input type="hidden" name="authenticity_token" value="iovtSYWW4p1BIN3jgSikauFUYqqCZE9xjVXf6hzm8sc8jlPLzWBm2BIPFXTK7zy0Mkj+l6HcFpRjZ9mIs01C3w==">
    </form>
  </td>
</tr>
</script>


